{% extends "admin/base.html" %}
{% load static %}

{% block title %}Medical Connect Admin{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    :root {
        --doctor-primary: #00897b;
        --doctor-primary-dark: #00695c;
        --doctor-primary-light: #00a489;
        --doctor-surface: #f1f7f5;
        --doctor-card: #ffffff;
        --doctor-shadow: 0 24px 48px rgba(0, 137, 123, 0.1);
        --doctor-border: rgba(0, 137, 123, 0.14);
        --doctor-text: #0f3d37;
        --doctor-muted: #4b6b66;
    }

    body {
        background: #e9f5f3;
        font-family: "Poppins", "Segoe UI", Tahoma, sans-serif;
        color: var(--doctor-text);
    }

    .admin-console-nav {
        grid-area: sidebar;
        background: linear-gradient(180deg, #00897b 0%, #007a6d 100%);
        color: #ffffff;
        border-radius: 32px;
        padding: clamp(28px, 4vw, 40px);
        display: flex;
        flex-direction: column;
        gap: 28px;
        box-shadow: 0 32px 60px rgba(0, 100, 86, 0.32);
        position: sticky;
        top: clamp(96px, 8vw, 140px);
        max-height: calc(100vh - clamp(140px, 12vw, 200px));
        overflow: auto;
        align-self: stretch;
        min-width: 240px;
    }

    .admin-console-brand {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .admin-console-logo {
        width: 54px;
        height: 54px;
        border-radius: 18px;
        display: grid;
        place-items: center;
        background: rgba(255, 255, 255, 0.16);
        font-size: 1.5rem;
    }

    .admin-console-text {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .admin-console-app {
        font-size: 0.85rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        opacity: 0.85;
        font-weight: 600;
    }

    .admin-console-title {
        font-size: 1.2rem;
        font-weight: 700;
    }

    .admin-console-menu {
        display: flex;
        flex-direction: column;
        gap: 14px;
    }

    .admin-console-menu a {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 18px;
        border-radius: 16px;
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .admin-console-menu a span {
        flex: 1;
    }

    .admin-console-menu a.active,
    .admin-console-menu a:hover {
        background: rgba(255, 255, 255, 0.2);
        color: #ffffff;
        transform: translateX(4px);
    }

    #header {
        background: #ffffff;
        border-radius: 24px;
        margin: 0;
        padding: clamp(20px, 4vw, 30px);
        box-shadow: 0 18px 45px rgba(15, 39, 65, 0.08);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
        grid-area: header;
        width: 100%;
        border: 1px solid rgba(0, 137, 123, 0.08);
    }

    #branding h1,
    #branding h1 a {
        color: var(--doctor-primary);
        font-weight: 700;
        font-size: 1.6rem;
        text-decoration: none;
    }

    .admin-branding .tagline {
        color: var(--doctor-muted);
        margin: 6px 0 0;
        font-size: 0.95rem;
        font-weight: 500;
    }

    #user-tools {
        color: var(--doctor-muted);
        font-weight: 500;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    #user-tools a {
        color: var(--doctor-primary);
        background: rgba(0, 137, 123, 0.12);
        padding: 6px 14px;
        border-radius: 999px;
        text-decoration: none;
        transition: background 0.2s ease, color 0.2s ease;
    }

    #user-tools a:hover {
        background: rgba(0, 137, 123, 0.18);
        color: var(--doctor-primary-dark);
    }

    #content {
        background: var(--doctor-card);
        border-radius: 28px;
        margin: 0;
        padding: clamp(28px, 5vw, 60px) clamp(28px, 6vw, 72px);
        box-shadow: 0 22px 54px rgba(15, 39, 65, 0.08);
        border: 1px solid rgba(0, 137, 123, 0.08);
        grid-area: content;
        min-width: 0;
        display: grid;
        gap: clamp(24px, 4vw, 48px);
        grid-template-columns: minmax(0, 1fr);
        grid-auto-flow: row;
        align-items: stretch;
        justify-items: stretch;
    }

    #content.has-related {
        grid-template-columns: minmax(0, 2.6fr) minmax(0, 1fr);
    }

    #content.has-related #content-main {
        grid-column: 1;
    }

    #content.has-related #content-related {
        grid-column: 2;
        align-self: start;
    }

    #content.change-list {
        position: static;
        grid-template-columns: minmax(0, 1fr);
        padding: clamp(32px, 5vw, 52px) clamp(24px, 5vw, 48px);
        border-radius: 28px;
    }

    #content.change-list #content-main {
        width: 100%;
        display: grid;
        gap: clamp(18px, 3vw, 32px);
    }

    #content.change-list #content-main > * {
        width: 100%;
    }

    #content.change-list .module {
        width: 100%;
        box-sizing: border-box;
    }

    #content.change-list .object-tools {
        position: static;
        margin: 0 0 18px;
        justify-content: flex-end;
    }

    #app-filter {
        background: #ffffff;
        border-radius: 18px;
        border: 1px solid var(--doctor-border);
        box-shadow: 0 12px 32px rgba(0, 137, 123, 0.12);
        padding: 14px 18px;
    }

    #app-filter label {
        width: 100%;
    }

    #app-filter input {
        width: 100%;
        border: none;
        background: transparent;
        font-size: 0.95rem;
        color: var(--doctor-text);
        font-weight: 500;
    }

    #app-filter input::placeholder {
        color: rgba(15, 61, 55, 0.5);
    }

    #app-filter input:focus {
        outline: none;
    }

    #content .app-list {
        display: grid;
        gap: clamp(18px, 3vw, 26px);
    }

    #content .app-list > section {
        background: #ffffff;
        border-radius: 24px;
        border: 1px solid rgba(0, 137, 123, 0.12);
        box-shadow: 0 18px 36px rgba(15, 39, 65, 0.08);
        padding: clamp(24px, 4vw, 36px);
        display: grid;
        gap: clamp(16px, 3vw, 22px);
    }

    #content .app-list > section h2 {
        margin: 0;
        font-size: 1.4rem;
        color: var(--doctor-primary-dark);
        font-weight: 700;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
    }

    #content .app-list > section h2 .app-label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: var(--doctor-muted);
        background: rgba(0, 137, 123, 0.12);
        padding: 4px 12px;
        border-radius: 999px;
        font-weight: 600;
    }

    #content .app-list .module {
        border: none;
        border-radius: 16px;
        box-shadow: none;
        padding: 0;
        background: transparent;
    }

    #content .app-list .module table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 12px;
        background: transparent;
    }

    #content .app-list .module table tbody tr {
        background: #f5fcfa;
        border-radius: 14px;
    }

    #content .app-list .module table tbody tr td {
        padding: 14px 16px;
        border-bottom: none;
    }

    #content .app-list .module table tbody tr td:first-child a {
        font-weight: 600;
        color: var(--doctor-text);
        text-decoration: none;
    }

    #content .app-list .module table tbody tr td:first-child a:hover {
        color: var(--doctor-primary);
    }

    #content .app-list .module table tbody tr td:last-child {
        text-align: right;
    }

    #content .app-list .module table tbody tr td .addlink,
    #content .app-list .module table tbody tr td .changelink {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        border-radius: 999px;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.05em;
        font-weight: 600;
        background: rgba(11, 165, 122, 0.18);
        color: var(--doctor-primary-dark);
    }

    #content .app-list .module table tbody tr td .addlink:hover,
    #content .app-list .module table tbody tr td .changelink:hover {
        background: rgba(4, 90, 82, 0.22);
        color: #ffffff;
    }

    #content h1,
    #content h2,
    #content h3,
    #content h4,
    #content h5 {
        color: var(--doctor-text);
        font-weight: 700;
    }

    #content h1 {
        font-size: clamp(2rem, 3vw, 2.6rem);
        color: var(--doctor-primary-dark);
    }

    #content .module caption,
    #content .module h2 {
        font-size: 1.2rem;
        color: var(--doctor-primary);
    }

    body:not(.login) #container {
        display: grid;
        grid-template-columns: minmax(260px, 300px) minmax(0, 1fr);
        grid-template-rows: auto 1fr;
        grid-template-areas:
            "sidebar header"
            "sidebar content";
        align-items: start;
        gap: clamp(22px, 3vw, 32px);
        margin: 0;
        padding: clamp(32px, 5vw, 40px);
        box-sizing: border-box;
        width: 100%;
    }

    body:not(.login) #content-main {
        display: grid;
        gap: clamp(16px, 3vw, 28px);
    }

    #nav-sidebar,
    #toggle-nav-sidebar,
    .toggle-nav-sidebar {
        display: none !important;
    }

    .breadcrumbs {
        display: none;
    }

    .module {
        border: 1px solid rgba(0, 137, 123, 0.12);
        border-radius: 20px;
        box-shadow: 0 18px 42px rgba(15, 39, 65, 0.08);
        padding: 28px;
        background: var(--doctor-card);
        overflow-x: auto;
    }

    .module caption,
    .module h2 {
        border-bottom: 1px solid rgba(0, 137, 123, 0.22);
        padding-bottom: 12px;
        margin-bottom: 18px;
        font-size: 1.1rem;
        color: var(--doctor-primary-dark);
    }

    .module table {
        width: 100%;
        border-spacing: 0;
    }

    .module table thead {
        background: rgba(0, 137, 123, 0.12);
    }

    .module table th,
    .module table td {
        padding: 16px 18px;
        color: var(--doctor-text);
        border-bottom: 1px solid rgba(0, 137, 123, 0.12);
        white-space: nowrap;
    }

    .module table th {
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 0.04em;
        color: var(--doctor-muted);
    }

    .module table td {
        white-space: normal;
    }

    .module table tr:nth-child(even) {
        background: rgba(0, 137, 123, 0.04);
    }

    .module table tr:hover {
        background: rgba(0, 137, 123, 0.12);
    }

    .submit-row {
        padding: clamp(14px, 3vw, 22px);
        background: rgba(0, 137, 123, 0.08);
        border-radius: 16px;
        border: 1px solid var(--doctor-border);
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: flex-end;
    }

    .button,
    a.button,
    button.button,
    .submit-row input[type="submit"],
    .submit-row input[type="button"],
    .submit-row button,
    .submit-row .button {
        background: var(--doctor-primary);
        border: none;
        border-radius: 12px;
        color: #ffffff;
        font-weight: 600;
        padding: 10px 22px;
        box-shadow: 0 10px 24px rgba(0, 137, 123, 0.32);
        transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
    }

    .button:hover,
    .button:focus,
    a.button:hover,
    a.button:focus,
    button.button:hover,
    button.button:focus,
    .submit-row input[type="submit"]:hover,
    .submit-row input[type="button"]:hover,
    .submit-row button:hover,
    .submit-row .button:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 28px rgba(10, 116, 218, 0.45);
        background: var(--doctor-primary-dark);
        color: #ffffff;
    }

    .button.default,
    .submit-row .default,
    .submit-row input.default {
        background: var(--doctor-primary);
        color: #ffffff;
    }

    .button.cancel,
    a.button.cancel,
    button.cancel {
        background: rgba(0, 137, 123, 0.12);
        color: var(--doctor-primary-dark);
        box-shadow: none;
        border: 1px solid var(--doctor-border);
    }

    .button.cancel:hover,
    .button.cancel:focus,
    a.button.cancel:hover,
    a.button.cancel:focus,
    button.cancel:hover,
    button.cancel:focus {
        background: rgba(10, 116, 218, 0.18);
        border-color: rgba(10, 116, 218, 0.45);
        color: var(--doctor-primary-dark);
        transform: none;
    }

    .deletelink,
    .submit-row a.deletelink {
        background: rgba(220, 53, 69, 0.18);
        color: #b11e31;
        box-shadow: none;
    }

    .deletelink:hover,
    .deletelink:focus,
    .submit-row a.deletelink:hover,
    .submit-row a.deletelink:focus {
        background: rgba(220, 53, 69, 0.28);
        color: #8e1626;
        transform: none;
    }

    .button:disabled,
    .button[disabled],
    a.button[aria-disabled="true"],
    .submit-row input[disabled],
    .submit-row button[disabled] {
        background: rgba(10, 116, 218, 0.25);
        box-shadow: none;
        cursor: not-allowed;
        transform: none;
    }

    .module .addlink,
    .module .changelink,
    .module .deletelink,
    .module .viewlink {
        border-radius: 999px;
        padding: 6px 14px;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.04em;
    }

    .module .addlink { background: rgba(25, 135, 84, 0.15); color: #1f7f50; }
    .module .changelink { background: rgba(10, 116, 218, 0.18); color: var(--doctor-primary-dark); }
    .module .deletelink { background: rgba(220, 53, 69, 0.18); color: #b11e31; }
    .module .viewlink { background: rgba(108, 117, 125, 0.18); color: #495057; }

    form .aligned .form-row,
    .form-row {
        display: grid;
        grid-template-columns: minmax(180px, 220px) 1fr;
        gap: clamp(12px, 3vw, 18px);
        align-items: center;
        margin-bottom: clamp(12px, 3vw, 18px);
    }

    form .aligned .form-row .field-box label,
    .form-row label {
        font-weight: 600;
        color: var(--doctor-muted);
    }

    form .aligned .form-row .field-box input,
    form .aligned .form-row .field-box select,
    form .aligned .form-row .field-box textarea,
    .form-row input,
    .form-row select,
    .form-row textarea {
        border-radius: 12px;
        border: 1px solid var(--doctor-border);
        padding: 12px 16px;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        background: #fdfdff;
    }

    .form-row input:focus,
    .form-row select:focus,
    .form-row textarea:focus {
        outline: none;
        border-color: var(--doctor-primary);
        box-shadow: 0 0 0 3px rgba(10, 116, 218, 0.22);
    }

    #nav-sidebar .current-app .section,
    #nav-sidebar .current-model {
        background: rgba(10, 116, 218, 0.14);
        border-radius: 12px;
    }

    #nav-sidebar::-webkit-scrollbar {
        width: 8px;
    }

    #nav-sidebar::-webkit-scrollbar-track {
        background: rgba(0, 137, 123, 0.08);
        border-radius: 10px;
    }

    #nav-sidebar::-webkit-scrollbar-thumb {
        background: rgba(10, 116, 218, 0.4);
        border-radius: 10px;
    }

    #nav-sidebar {
        background: var(--doctor-card);
        border-radius: 18px;
        padding: clamp(16px, 3vw, 24px);
        margin: 0;
        box-shadow: 0 12px 32px rgba(16, 30, 115, 0.08);
        border: 1px solid var(--doctor-border);
        position: sticky;
        top: clamp(96px, 10vw, 140px);
        max-height: calc(100vh - clamp(128px, 12vw, 180px));
        overflow: auto;
        grid-area: sidebar;
        align-self: stretch;
        width: min(240px, 100%);
    }

    #nav-sidebar h2 {
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 0.12em;
        color: var(--doctor-muted);
        margin-bottom: 12px;
    }

    #nav-sidebar .module caption {
        border-bottom: none;
        margin-bottom: 8px;
        padding-bottom: 0;
    }

    #nav-sidebar ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: 8px;
    }

    #nav-sidebar li a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        border-radius: 12px;
        color: var(--doctor-text);
        font-weight: 600;
        text-decoration: none;
        transition: background 0.2s ease, color 0.2s ease;
    }

    #nav-sidebar li a:hover,
    #nav-sidebar li a:focus {
        background: rgba(17, 181, 197, 0.12);
        color: var(--doctor-primary-dark);
    }

    .dashboard #content {
        display: grid;
        gap: clamp(18px, 3vw, 28px);
    }

    .dashboard .app-index {
        display: grid;
        gap: clamp(18px, 3vw, 28px);
    }

    .dashboard .app-index .module {
        display: grid;
        gap: clamp(12px, 2vw, 18px);
    }

    .dashboard .app-index .module ul {
        display: grid;
        gap: 10px;
    }

    .object-tools {
        margin-bottom: 18px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: flex-end;
    }

    .object-tools a {
        background: var(--doctor-primary);
        border-radius: 999px;
        color: #ffffff;
        font-weight: 600;
        padding: 8px 18px;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        box-shadow: 0 10px 24px rgba(17, 181, 197, 0.25);
    }

    .inline-group {
        border-radius: 20px;
        border: 1px solid var(--doctor-border);
        box-shadow: 0 12px 28px rgba(16, 30, 115, 0.08);
        overflow: hidden;
        background: var(--doctor-card);
    }

    .inline-group h2 {
        background: rgba(10, 116, 218, 0.1);
        padding: clamp(14px, 3vw, 24px);
        margin: 0;
    }

    .inline-related {
        padding: clamp(16px, 3vw, 28px);
        display: grid;
        gap: clamp(12px, 3vw, 18px);
    }

    .selector {
        display: grid;
        gap: clamp(12px, 3vw, 18px);
    }

    .selector select {
        min-height: 220px;
        border-radius: 16px;
        border: 1px solid var(--doctor-border);
        box-shadow: inset 0 2px 8px rgba(0, 137, 123, 0.08);
    }

    .selector-available h2, .selector-chosen h2 {
        color: var(--doctor-primary-dark);
    }

    .selector-chosen .selector-chooser {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    #footer {
        background: transparent;
        color: var(--doctor-muted);
        text-align: center;
        margin-bottom: 24px;
    }

    @media (max-width: 1280px) {
        body:not(.login) #container {
            grid-template-columns: minmax(200px, 240px) 1fr;
            gap: clamp(14px, 3vw, 20px);
        }
    }

    @media (max-width: 1024px) {
        body:not(.login) #container {
            grid-template-columns: 1fr;
            grid-template-rows: auto;
            grid-template-areas:
                "header"
                "content"
                "sidebar";
        }

        .admin-console-nav {
            position: static;
            max-height: none;
            min-width: 100%;
        }

        #header {
            margin: 0;
            border-radius: 0;
        }

        #content.change-list {
            position: static;
        }

        #content.change-list .object-tools {
            position: static;
            transform: none;
            justify-content: flex-start;
            margin-top: 12px;
        }

        .submit-row {
            justify-content: center;
        }
    }

    @media (max-width: 768px) {
        body:not(.login) #container {
            margin: clamp(12px, 4vw, 24px);
        }

        #header {
            flex-direction: column;
            align-items: flex-start;
        }

        #user-tools {
            justify-content: flex-start;
        }

        form .aligned .form-row,
        .form-row {
            grid-template-columns: 1fr;
        }

        #content.change-list .object-tools {
            width: 100%;
            flex-wrap: wrap;
            gap: 10px;
        }

        .module table {
            display: block;
            overflow-x: auto;
        }
    }

    @media (max-width: 576px) {
        #header {
            border-radius: 0;
        }

        #content.change-list .breadcrumbs {
            padding: clamp(12px, 4vw, 18px);
        }

        #content.change-list .object-tools {
            margin-top: 16px;
            justify-content: flex-start;
        }

        .submit-row {
            flex-direction: column;
            align-items: stretch;
        }

        .object-tools {
            flex-direction: column;
            align-items: stretch;
        }

        #nav-sidebar li a {
            padding: 10px 12px;
        }
    }
</style>
{% endblock %}

{% block branding %}
<div class="admin-branding">
    <h1><a href="{% url 'admin:index' %}">Medical Connect Control Center</a></h1>
    <p class="tagline">Manage doctors, appointments, and patient experiences with ease</p>
</div>
{% endblock %}

{% block nav-sidebar %}
<nav class="admin-console-nav">
    <div class="admin-console-brand">
        <div class="admin-console-logo"><i class="bi bi-heart-pulse"></i></div>
        <div class="admin-console-text">
            <span class="admin-console-app">Medical Connect</span>
            <span class="admin-console-title">Admin Console</span>
        </div>
    </div>
    <div class="admin-console-menu">
        <a href="{% url 'admin:index' %}" class="{% if request.resolver_match.url_name == 'index' %}active{% endif %}"><i class="bi bi-speedometer2"></i><span>Overview</span></a>
        <a href="{% url 'admin:accounts_customuser_changelist' %}" class="{% if request.resolver_match.url_name == 'accounts_customuser_changelist' %}active{% endif %}"><i class="bi bi-people"></i><span>Users</span></a>
        <a href="{% url 'admin:appointments_appointment_changelist' %}" class="{% if request.resolver_match.url_name == 'appointments_appointment_changelist' %}active{% endif %}"><i class="bi bi-calendar-event"></i><span>Appointments</span></a>
        <a href="{% url 'admin:messaging_notification_changelist' %}" class="{% if request.resolver_match.url_name == 'messaging_notification_changelist' %}active{% endif %}"><i class="bi bi-bell"></i><span>Notifications</span></a>
    </div>
</nav>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
{% endblock %}
